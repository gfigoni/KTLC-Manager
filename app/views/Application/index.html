#{extends 'main.html' /}
#{set title:messages.get('title.default') /}
#{set page:'home' /}

#{if ktlc}
<div id="content_top">
    <ul>
        <li>#{a @Application.ktlc(ktlc.number)}&{'ktlc.number', ktlc.number} <span>${ktlc.date.format()}</span>#{/a}</li>
    </ul>
</div>
<div id="main">
    <div class="map">
        #{list ktlc.races, as:'race'}
        <ul>
            <li>${race.map.name}</li>
            <li>${race.map.author.name}</li>
            <li>${race.map.environment}</li>
        </ul>
        #{/list}
    </div>
    <div class="separator"></div>
    <div id="content">
        <div class="content_box">
            <ul class="menu home">
                <li class="rank menu home">&{'player.rank'}</li>
                <li class="player menu home">&{'player'}</li>
                <li class="score menu home">&{'player.score'}</li>
                <li class="race menu home">&{'player.nbraces'}</li>
            </ul>
            #{list ktlc.results, as:'result'}
            <ul class="home">
                <li class="rank">${result.rank}</li>
                <li class="player">#{a @Application.player(result.player.logins[0])}${result.player.name}#{/a}</li>
                <li class="score">${result.score}</li>
                <li class="race">${result.nbRaces}</li>
            </ul>
            #{/list}
        </div>
    </div>
    <div class="cleaner"></div>
</div>
#{/if}
#{else}
<div id="content_top">
    <ul>
        <li><h1><a>&{'error.noktlc'}</a></h1></li>
    </ul>
</div>
<div id="main">
    <div id="content">
        <div class="content_box">

        </div>
    </div>
    <div class="cleaner"></div>
</div>
#{/else}